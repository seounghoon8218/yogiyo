<?xml version="1.0" encoding="UTF-8"?>

<!-- ==== #28. mapper 기본설정 ==== -->
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- ==== #29. 루트 엘리먼트 & 네임스페이스 설정(프로젝트 전체내에서 유일해야 한다.) ==== -->
<mapper namespace="kkk">

	<!-- 매장가져오기 -->
	<select id="getShopList" resultType="com.spring.yogiyo.ooomodel.oooVO" parameterType="HashMap">
		select masterno, shopname, shopcategorycode, addr, addr2, wdo, kdo, shoptel, shopimage, shoptime, minprice, paymethod, sanghoname, wonsanji
		from tbl_shop		
		<if test='shopcategorycode != "0"'>
		where shopcategorycode = #{shopcategorycode}
		</if>
	</select>
	
	<!-- 매장하나정보 가지고오기 -->
	<select id="getShopView" parameterType="String" resultType="com.spring.yogiyo.ooomodel.oooVO">
		select masterno, shopname, shopcategorycode, addr, addr2, wdo, kdo, shoptel, shopimage, shoptime, minprice, paymethod, sanghoname, wonsanji
		from tbl_shop
		where masterno = #{masterno}
	</select>
	
	<!-- // 메뉴카테고리 가져오기 -->
	<resultMap type="HashMap" id="MenucategoryMap">
      <result property="menuspeccode" column="menuspeccode" javaType="String" />
      <result property="menuspecname" column="menuspecname" javaType="String" />
   </resultMap>
   	
	<select id="getMenucategoryList" resultMap="MenucategoryMap">
		select menuspeccode, menuspecname 
		from TBL_MENUSPEC
	</select>
	
	<!-- // 리스트별 메뉴 가져오기 -->
	<resultMap type="HashMap" id="MenuMap">
      <result property="menucode" column="menucode" javaType="String" />
      <result property="masterno" column="masterno" javaType="String" />
      <result property="menuname" column="menuname" javaType="String" />
      <result property="menuprice" column="menuprice" javaType="String" />
      <result property="filename" column="filename" javaType="String" />
      <result property="pop_menuspeccode" column="pop_menuspeccode" javaType="String" />
   </resultMap>
   	
	<select id="getMenuList" resultMap="MenuMap" parameterType="HashMap">
		select menucode, masterno, menuname, menuprice, filename, pop_menuspeccode
 		from tbl_menuspec s left join tbl_menu m
 			on s.menuspeccode = m.fk_menuspeccode
 		where menuspeccode = #{code}
 		and masterno = #{masterno}
	</select>
	
</mapper>